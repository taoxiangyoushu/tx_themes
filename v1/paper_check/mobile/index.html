<!doctype html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <!-- 用于指定双核浏览器默认以何种方式渲染页面 -->
    <meta name="renderer" content="webkit">
    <!-- 为移动设备添加 viewport；-->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <!-- 删除苹果默认的工具栏和菜单栏 -->
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <!-- 设置苹果工具栏颜色 -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 -->
    <meta name="HandheldFriendly" content="true">
    <!-- 微软的老式浏览器 -->
    <meta name="MobileOptimized" content="320">
    <!-- uc强制竖屏 -->
    <meta name="screen-orientation" content="portrait">
    <!-- QQ强制竖屏 -->
    <meta name="x5-orientation" content="portrait">
    <!-- UC强制全屏 -->
    <meta name="full-screen" content="yes">
    <!-- QQ强制全屏 -->
    <meta name="x5-fullscreen" content="true">
    <!-- UC应用模式 -->
    <meta name="browsermode" content="application">
    <!-- QQ应用模式 -->
    <meta name="x5-page-mode" content="app">
    <!-- windows phone 点击无高光 -->
    <meta name="msapplication-tap-highlight" content="no">
    <!-- 指定请求和响应遵循的缓存机制 -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <!-- 优先使用 IE 最新版本和 Chrome -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>论文查重</title>
    <meta name="description" content="24小时自助检测，可以快速准确地检测出毕业论文、博士、硕士论文、期刊论文中的不当引用、过度引用、论文抄袭、伪造、篡改等学术不端行为"/>
    <meta name="keywords" content="检测重复率,论文查重,论文检测,毕业论文抄袭查重检测"/>
    <link rel="shortcut icon" href="../mobile/assets/favicon.ico" type="image/vnd.microsoft.icon"/>
    <link rel="stylesheet" href="../mobile/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="../mobile/assets/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="../mobile/assets/css/bootstrapValidator.min.css">
    <link rel="stylesheet" href="../mobile/assets/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" href="../mobile/assets/css/select2.min.css">
    <link rel="stylesheet" href="../mobile/assets/css/base.css">
    <link rel="stylesheet" href="../mobile/assets/css/kefu.css?v=m24.0003">
    <link rel="stylesheet" href="../mobile/assets/css/common.css?v=m24.0003">
    <link rel="stylesheet" href="../mobile/assets/css/index.css?v=m24.0003">
    <script>
        var USER_TOKEN = 'RmlETkdPdjYzZmVjNTVhMDAyYzY='
        var JANE_NAME = 'paper_platform';
    </script>
</head>
<body>
<div class="index_app">
    <div class="home">
        <div class="head">
            <div class="logo">
                <img src="../mobile/assets/img/logo.png" alt="">
            </div>
            <div class="nav-btn">
                <a href="./query.html">下载报告</a>
            </div>
        </div>
        <div class="banner">
            <p class="p1">备受关注的</p>
            <p class="p2"><span class="switch-text"></span>平台</p>
            <p class="p3">多品类官方合作查重品牌</p>
            <p class="p4">安全/准确/权威满足你的查重需求</p>
            <div class="check-btn" id="checkBlock">
                <a href="#">立即查重</a>
            </div>
        </div>
        <div class="loadingBlock">
            <div class="size-seat"></div>
        </div>
       <div class="formBlock">
           <div class="system-block"></div>
           <p class="suitability-tips">
               <img src="../mobile/assets/img/warning.png" alt="">
               <span>适合各类本科硕博的初稿查重，适合中文/英文</span>
           </p>
           <div class="check-form">
               <form class="ContainerTo clearfix" id="ContainerTo">
                   <div class="form-group form-group_s short card card4 Conditions check-version">
                       <label class="label_s"> <img src="../mobile/assets/img/icon-system.png" alt=""> 版本 </label>
                       <div class="type_name inputBox">
                           <input type="hidden" id="roleid2" name="roleid2">
                           <select id="type_s" class="selectpicker show-tick form-control" title="请选择类型">
                           </select>
                       </div>
                   </div>
                   <div class="form-group form-group_s card card3 Conditions Universal">
                       <label class="label_s"> <img src="../mobile/assets/img/icon-title.png" alt=""> 标题 </label>
                       <div class="inputBox">
                           <input autocomplete="off" maxlength="50" name="title" type="text" placeholder="请填写您的论文题目，30字内" id="title" class="form-control" />
                       </div>
                       <span id="title_err"></span>
                   </div>
                   <div class="form-group form-group_s card card3 Conditions Universal">
                       <label class="label_s"> <img src="../mobile/assets/img/icon-author.png" alt=""> 作者 </label>
                       <div class="inputBox">
                           <input autocomplete="off" maxlength="50" name="author" type="text" placeholder="请填写您的论文作者，15字内" id="author" class="form-control" />
                       </div>
                       <span id="author_err"></span>
                   </div>
                   <div class="form-group form-group_s card card3 Conditions DateBox">
                       <label class="label_s"> <img src="../mobile/assets/img/icon-date.png" alt=""> 日期 </label>
                       <div class="inputBox">
                           <input autocomplete="off" readonly name="date" type="text" data-date-autoclose="true" data-date-format="yyyy-mm-dd" placeholder="请选择期刊发表日期" id="date" class="form-control" />
                       </div>
                       <span id="date_err"></span>
                   </div>
                   <div class="form-group form-group_s card card3 Conditions tempSelect">
                       <label class="label_s"> <img src="../mobile/assets/img/icon-temp.png" alt=""> 模板 </label>
                       <div class="inputBox">
                           <select style="line-height: 4rem;height: 4rem;width: 100%" class="form-control" name="tempId" id="selectTemp">

                           </select>
                       </div>
                       <span id="temp_err"></span>
                   </div>
                   <div class="form-group form-group_s card card4 Conditions content-block">
                       <div class="contentBox">
                           <textarea autocomplete="off" maxlength="300000" name="content" type="text" placeholder="" id="content" class="form-control"></textarea>
                           <div class="tips-block">
                               <p class="p1">请填写或上传您的论文内容......</p>
                               <p class="p2">字数范围在200字~300000字之内</p>
                           </div>
                           <div class="upload-block">
                               <div class="upload-box">
                                   <img src="../mobile/assets/img/upload-icon.png" alt="">
                                   <input id="file" type="file" accept=".doc,.docx,.txt,text/plain">
                               </div>
                               <div class="upload-tip">
                                   <p class="p1">点击图标上传</p>
                                   <p class="p2">文档支持txt、doc(x)，文件大小不得超过15M</p>
                               </div>
                           </div>
                       </div>
                       <div class="uploadBox">
                           <div class="file-icon">
                               <div class="fileIco loading">
                                   <img src="../mobile/assets/img/Middle.png" alt="">
                                   <img src="../mobile/assets/img/loading2.gif" class="loading" alt="">
                               </div>
                               <div class="fileIco file-txt">
                                   <img src="../mobile/assets/img/DocumentText.png" alt="">
                               </div>
                               <div class="fileIco file-word">
                                   <img src="../mobile/assets/img/DocumentWord.png" alt="">
                               </div>
                           </div>
                           <div class="file-info">
                               <p class="file-name"></p>
                               <div class="status-block">
                                   <div class="upload-loading">
                                       <span>正在上传</span>
                                       <span class="deleteFile">重新上传</span>
                                   </div>
                                   <div class="upload-success">
                                       <img src="../mobile/assets/img/UploadedSuccessfully.png" alt="">
                                       <span>上传成功</span>
                                       <span class="deleteFile">
                                        <img src="../mobile/assets/img/Deletewd.png" alt="">
                                        删除
                                    </span>
                                   </div>
                                   <div class="upload-fail">
                                       <img src="../mobile/assets/img/UploadFailed.png" alt="">
                                       <span>上传失败</span>
                                       <span class="deleteFile">重新上传</span>
                                   </div>
                               </div>
                           </div>
                       </div>
                       <span id="content_err"></span>
                   </div>
                   <div class="form-group submit">
                       <button id="check" class="btn btn-primary check">立即检测</button>
                   </div>
                   <div class="form-group price-block">
                       计费方式：<span class="unit-price"></span>    <span class="wordCount">当前输入: <span class="word-num">0</span>字</span>
                   </div>
               </form>
           </div>
       </div>
        <div class="view1">
            <p class="p1">直连高校查重系统</p>
            <p class="p2">论文安全不泄露</p>
            <div class="advantage">
                <div class="c-item color1">
                    <img src="../mobile/assets/img/xitong.png" alt="">
                    <p class="p1">多系统支持</p>
                    <p class="p2">满足你的查重需求</p>
                </div>
                <div class="c-item color2">
                    <img src="../mobile/assets/img/i-sf.png" alt="">
                    <p class="p1">智能算法准确</p>
                    <p class="p2">亿级别互联网网页数据库资源</p>
                </div>
            </div>
            <div class="advantage ad1">
                <div class="c-item color3">
                    <img src="../mobile/assets/img/anquan.png" alt="">
                    <p class="p1">看得见的安全</p>
                    <p class="p2">安全加密，不存在原文泄露担忧</p>
                </div>
                <div class="c-item color4">
                    <img src="../mobile/assets/img/shujuku.png" alt="">
                    <p class="p1">海量数据库</p>
                    <p class="p2">为查重比对提供有力支撑</p>
                </div>
            </div>
        </div>
        <div class="user-reviews">
            <p class="p1">50,000,0+</p>
            <p class="p2">查重50w+文档，来自真实用户的反馈与推荐</p>
            <div class="ur-item">
                <img src="../mobile/assets/img/user1.png" alt="">
                <div class="ur-text">
                    <p class="p1">@万同学    本科毕业生</p>
                    <p class="p2">用了维普查重，和学校最终结果一模一样，顺利毕业答辩了~</p>
                </div>
            </div>
            <div class="ur-item">
                <img src="../mobile/assets/img/user2.png" alt="">
                <div class="ur-text">
                    <p class="p1">@张同学    硕博毕业生</p>
                    <p class="p2">说句实话，使用大师查重的免费查重，确实对我来说是一个福音，还有就是检测速度确实蛮快的，准确率</p>
                </div>
            </div>
            <div class="ur-item">
                <img src="../mobile/assets/img/user3.png" alt="">
                <div class="ur-text">
                    <p class="p1">@June老师</p>
                    <p class="p2">找外文查重特别难，很怕假的，找到这家用了UK版本，很准确！</p>
                </div>
            </div>
        </div>
        <div class="guide">
            <p class="p1">
                <img class="star" src="../mobile/assets/img/xin.png" alt="">
                准备好开始查重了吗？
            </p>
            <div class="btn-check"><a href="#checkBlock">立即查重</a></div>
        </div>
        <div id="filing-information"></div>
    </div>
    <div class="system-contrast-pop">
        <div class="top">
            品牌对比
            <img class="closePop" src="../mobile/assets/img/delete3.png" alt="">
        </div>
        <div class="bottom">
            <p>高峰期检测时间会有所延长</p>
            <div class="card-head">
                <div class="block1">品牌</div>
                <div class="block2">耗时</div>
                <div class="block3 block-c">数据库</div>
                <div class="block4 block-c">语种</div>
            </div>
            <div class="introduce-region">

            </div>
        </div>
    </div>
</div>

<div class="mask-pop"></div>
<div class="dashi_wx_box text_a_c">
    <div class="customerBox">
        <i class="close-wx"></i>
        <div class="head">
            <img src="../mobile/assets/img/kf.png" alt="">
            <span class="customer-title"></span>
        </div>
        <div class="customerCode">
            <img class="customer-qr" src="" alt="">
        </div>
        <div class="segmentation-line"></div>
        <div class="customerWay">
            <p class="wxText"><span class="s0">微信:</span> <span class="s1"></span></p>
            <p class="qqText"><span class="s0">Q Q:</span> <span class="s1"></span></p>
            <p class="telephone"><span class="s0">电话:</span> <span class="s1"></span></p>
            <p class="mailbox"><span class="s0">邮箱:</span> <span class="s1"></span></p>
        </div>
        <p class="noCustomer">商家未设置客服</p>
        <img class="customBg" src="../mobile/assets/img/bg1.png" alt="">
    </div>
</div>
<div class="mask-fixed"></div>
<div class="customer-wx">
    <img src="../mobile/assets/img/kfwx.png" alt="客服">
</div>
<!--<div class="customer-wx">-->
<!--    <img src="../mobile/../mobile/assets/img/kfwx.png" alt="客服">-->
<!--</div>-->
<script src="../mobile/assets/js/jquery.min.js"></script>
<script src="../mobile/assets/js/bootstrap.min.js"></script>
<script src="../mobile/assets/js/bootstrap-select.js"></script>
<script src="../mobile/assets/js/bootstrapValidator.min.js"></script>
<script src="../mobile/assets/js/bootstrap-datetimepicker.min.js"></script>
<script src="../mobile/assets/js/bootstrap-datetimepicker.zh-CN.js"></script>
<script src="../mobile/assets/js/message.js"></script>
<script src="../mobile/assets/js/select2.min.js"></script>
<script src="../mobile/assets/js/typed.min.js"></script>
<script src="../mobile/assets/js/clipboard.min.js"></script>
<script src="../mobile/assets/js/common.js?v=m24.0003"></script>
<script>
    var uploadType = 'content'
    var minWords = ''
    var maxWords = ''
    var order_openid = ''
    $('#date').datetimepicker({minView: 2, language: "zh-CN"});
    $('#date').on('hide',function(e) {    // 日期选择隐藏后重新验证
        $('#ContainerTo').data('bootstrapValidator')
            .updateStatus('date', 'NOT_VALIDATED', null)
            .validateField('date');
    });

    var typed = new Typed('.switch-text', {
        strings: ['论文查重', '准确安全', '严选加密'], // 要轮流显示的字符串数组
        typeSpeed: 150, // 打字速度（单位：字符/每秒）
        backSpeed: 10, // 删除速度
        loop: true, // 是否循环播放
        backDelay: 800, // 每个字符串之间延迟的时间
        showCursor: false, // 显示光标
        fadeOut: true,
    });
    var system_range = {
        'wanfang': '适合各类本科、专科、硕士、博士、职称、期刊、MBA论文',
        'weipu': '适合各类本科、专科、硕士、博士、职称、期刊、MBA论文',
        'paperPass': '适合各类本科、专科、硕博论文',
        'ithenticate': '适合留学生、SCI论文、EI论文、英文写作论文',
        'turnitin': '国际版适合留学生、SCI论文、EI论文、英文写作论文,UK版适合英国留学生专用检测',
        'zaojiance': '适合各类本科、专科、硕士、博士论文',
        'checkPass': '适合各类本科、专科、硕士、博士、职称、期刊、MBA论文',
        'dashichachong': '适合各类本科、专科、硕士、博士论文',
        'paperyy': '适合各类本科、专科、硕士、博士论文',
        'yuanwenjian': '适合各类本科、专科、硕士、博士论文',
        'grammarly': '适合留学生、SCI论文、EI论文、英文写作论文',
    }

    // 维普格式检测大学生版  模板获取
    var cqvip_getFormatTemplate = []
    function getFormaTemplate() {
        $.ajax({
            type: 'post',
            url: urls + "/api/tool/get_types?scenes_id=get_paper_check_params_data",
            data: {
                type: 'cqvip_getFormatTemplate',
                temp_type: '2'
            },
            success: function (res){
                if(res.code == 200){
                    cqvip_getFormatTemplate = res.data
                    $("#selectTemp").append("<option disabled='true' value='' selected>请选择或输入关键词搜索模板</option>");
                    for(var i=0;i<res.data.length;i++) {
                        $("#selectTemp").append("<option value='"+ res.data[i].tempId +"'>"+ res.data[i].tempName +"</option>");
                    }
                    if($('#selectTemp')[0]){
                        $('#selectTemp').select2();
                    }
                }else{
                    cocoMessage.error( res.codeMsg, 2000);
                }
            },
            error: function (err){

            }
        })
    }

    // 显示数据
    function dropDownType(typeData){
        var systemEl = ''
        var active = true
        for(var i=0; i<sequenceArr.length; i++) {
            if (active) {
                systemEl += '<div class="system-item active" data-name="'+ sequenceArr[i] +'">\n' +
                    '            <div class="system-top">\n' +
                    '                <img src="../mobile/assets/img/logo-'+ sequenceArr[i] +'.png?v=2" alt="" class="system-logo">\n' +
                    '            </div>\n' +
                    '            <div class="system-bottom">\n' +
                    '                <p class="system-price"></p>\n' +
                    '            </div>\n' +
                    '            <img class="checked" src="../mobile/assets/img/gou.png" alt="">\n' +
                    '        </div>'
            }else{
                systemEl += '<div class="system-item" data-name="'+ sequenceArr[i] +'">\n' +
                    '            <div class="system-top">\n' +
                    '                <img src="../mobile/assets/img/logo-'+ sequenceArr[i] +'.png?v=2" alt="" class="system-logo">\n' +
                    '            </div>\n' +
                    '            <div class="system-bottom">\n' +
                    '                <p class="system-price"></p>\n' +
                    '            </div>\n' +
                    '            <img class="checked" src="../mobile/assets/img/gou.png" alt="">\n' +
                    '        </div>'
            }
            active = false
        }
        systemEl += '<div class="system-item system-contrast" >\n' +
            '            <p class="p1">品牌对比</p>\n' +
            '            <p class="p2">不知道选看我</p>\n' +
            '        </div>'
        $(".system-block").append(systemEl)

        var is_first = true
        for(var i=0; i<$(".system-item").length; i++){
            if(typeData.hasOwnProperty( $($(".system-item")[i]).data('name') )){

                $($(".system-item")[i]).show()
                $($(".system-item")[i]).css('display','inline-block')
                // 价格
                $($(".system-item")[i]).find('.system-price').text(typeData[$($(".system-item")[i]).data('name')][0].selling_price + '元/' + typeData[$($(".system-item")[i]).data('name')][0].unit_count + typeData[$($(".system-item")[i]).data('name')][0].unit_type)
            }else{
                if($($(".system-item")[i]).hasClass('system-contrast')){
                    $($(".system-item")[i]).show()
                }else{
                    $($(".system-item")[i]).hide()
                }
            }

            $(".loadingBlock").hide()
            $(".formBlock").show()
            if($($(".system-item")[i]).is(':visible') && is_first){
                is_first = false
                $($(".system-item")[i]).click()
            }
        }

        //品牌对比
        var introduceDom = ''
        $(".introduce-region").html('')
        for(var i=0; i<sequenceArr.length; i++){
            introduceDom += '<div class="card-content" data-name="'+ sequenceArr[i] +'">\n' +
                '                <div class="block1">\n' +
                '                    <img src="../mobile/assets/img/logo-'+ sequenceArr[i] +'.png?v=2" alt="">\n' +
                '                </div>\n' +
                '                <div class="block2">\n' +
                '                    <span>'+ systemInfo[sequenceArr[i]].timeConsuming +'</span>\n' +
                '                </div>\n' +
                '                <div class="block3">\n' +
                '                    <span>'+ systemInfo[sequenceArr[i]].comparisonLibrary +'</span>\n' +
                '                </div>\n' +
                '                <div class="block4">\n' +
                '                    <span>'+ systemInfo[sequenceArr[i]].Language +'</span>\n' +
                '                </div>\n' +
                '            </div>'
        }
        $(".introduce-region").append(introduceDom)

        var goodsArr = []
        for(var key in typeData) {
            goodsArr.push(key)
        }
        if(goodsArr.length < 2){
            $(".system-contrast").hide()
        }

        order_openid = getQueryVariable('openid')
        if(!order_openid){
            if(/MicroMessenger/.test(window.navigator.userAgent) && threeMsg.wx){
                location.href = 'https://api.taoxiangyoushu.com/weixin/getOpenId?appid=' + threeMsg.wx + '&otherUrl=' + encodeURIComponent(window.location.href)
            }
        }

        setClassStyle()
    }

    function setClassStyle(){
        for(var i=0; i<$(".system-item:visible").length; i++){
            if( (i+1) % 3 == 0 ) {
                $($(".system-item:visible")[i]).addClass('noMarginRight')
            }
        }
    }

    //系统切换
    $(".system-contrast-pop").on('click', function (){
        $(".mask-fixed").hide()
        $(".system-contrast-pop").hide()
    })

    $(document).on('click',".system-block .system-item",function (){
        if($(this).hasClass('system-contrast')){
            $(".mask-fixed").show()
            $(".system-contrast-pop").show()
            return
        }
        $(".system-item").removeClass('active')
        $(this).addClass('active')
        $(".DateBox").fadeOut()
        $(".tempSelect").fadeOut()
        $(".suitability-tips span").text(system_range[$(this).attr('data-name')])
        if(typeData[$(this).attr('data-name')].length >= 1 && ( $(this).attr('data-name') == 'turnitin' || $(this).attr('data-name') == 'wanfang' || $(this).attr('data-name') == 'weipu' || $(this).attr('data-name') == 'yuanwenjian' )) {
            var selectObj = $("#type_s");
            selectObj.find("option:not(:first)").remove();
            if($(this).attr('data-name') == 'turnitin') {
                for(var i=0; i<typeData[$(this).attr('data-name')].length; i++){
                    if(typeData[$(this).attr('data-name')][i].short_name == "turnitin") {
                        selectObj.append(new Option('国际版（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）',typeData[$(this).attr('data-name')][i].short_name));
                    }
                    if(typeData[$(this).attr('data-name')][i].short_name == "turnitinuk") {
                        selectObj.append(new Option('UK版（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）', typeData[$(this).attr('data-name')][i].short_name));
                    }
                    if(typeData[$(this).attr('data-name')][i].short_name == "turnitinai") {
                        selectObj.append(new Option('国际版+AI（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）', typeData[$(this).attr('data-name')][i].short_name));
                    }
                }
            }
            if($(this).attr('data-name') == 'wanfang') {
                for(var i=0; i<typeData[$(this).attr('data-name')].length; i++){
                    if(typeData[$(this).attr('data-name')][i].short_name == "wanfangbd") {
                        selectObj.append(new Option('本科版（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）',typeData[$(this).attr('data-name')][i].short_name));
                    }
                    if(typeData[$(this).attr('data-name')][i].short_name == "wanfangmd") {
                        selectObj.append(new Option('硕博版（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）', typeData[$(this).attr('data-name')][i].short_name));
                    }
                    if(typeData[$(this).attr('data-name')][i].short_name == "wanfangpu") {
                        selectObj.append(new Option('职称版（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）', typeData[$(this).attr('data-name')][i].short_name));
                    }
                    if(typeData[$(this).attr('data-name')][i].short_name == "wanfanggl") {
                        selectObj.append(new Option('通用版（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）', typeData[$(this).attr('data-name')][i].short_name));
                    }
                }
            }
            if($(this).attr('data-name') == 'weipu') {
                for(var i=0; i<typeData[$(this).attr('data-name')].length; i++){
                    if(typeData[$(this).attr('data-name')][i].short_name == "cqvip") {
                        selectObj.append(new Option('本科版（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）',typeData[$(this).attr('data-name')][i].short_name));
                    }
                    if(typeData[$(this).attr('data-name')][i].short_name == "cqvipmd") {
                        selectObj.append(new Option('硕博版（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）', typeData[$(this).attr('data-name')][i].short_name));
                    }
                    if(typeData[$(this).attr('data-name')][i].short_name == "cqvipzc") {
                        selectObj.append(new Option('职称版（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）', typeData[$(this).attr('data-name')][i].short_name));
                    }
                    if(typeData[$(this).attr('data-name')][i].short_name == "cqvipbj") {
                        selectObj.append(new Option('编辑部版（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）', typeData[$(this).attr('data-name')][i].short_name));
                    }
                    if(typeData[$(this).attr('data-name')][i].short_name == "cqvipaigc") {
                        selectObj.append(new Option('AIGC检测（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）', typeData[$(this).attr('data-name')][i].short_name));
                    }
                    if(typeData[$(this).attr('data-name')][i].short_name == "cqvipgs") {
                        selectObj.append(new Option('格式检测大学生版（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）', typeData[$(this).attr('data-name')][i].short_name));
                    }
                }
            }
            if($(this).attr('data-name') == 'yuanwenjian') {
                for(var i=0; i<typeData[$(this).attr('data-name')].length; i++){
                    if(typeData[$(this).attr('data-name')][i].short_name == "ywjbd") {
                        selectObj.append(new Option('本科版（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）',typeData[$(this).attr('data-name')][i].short_name));
                    }
                    if(typeData[$(this).attr('data-name')][i].short_name == "ywjmd") {
                        selectObj.append(new Option('硕博版（'+ typeData[$(this).attr('data-name')][i].selling_price + '元/' + typeData[$(this).attr('data-name')][i].unit_count + typeData[$(this).attr('data-name')][i].unit_type  +'）', typeData[$(this).attr('data-name')][i].short_name));
                    }
                }
            }
            $(".check-version").show()
            let _this = this
            selectObj.selectpicker('refresh');
            setTimeout(function() {
                $("#type_s").val(typeData[$(_this).attr('data-name')][0].short_name)
                selectObj.selectpicker('refresh');
                $('#type_s').change()
            }, 0)
        }else{
            $(".check-version").hide()
            //计费方式
            var explain = ''
            var unit = ''
            if(typeData[$(this).attr('data-name')][0].unit_type == '篇'){
                explain = typeData[$(this).attr('data-name')][0].selling_price +'/篇'
            }else{
                if(typeData[$(this).attr('data-name')][0].unit_count < 10000 && (typeData[$(this).attr('data-name')][0].unit_count%1000==0)) {
                    unit = (typeData[$(this).attr('data-name')][0].unit_count/1000) + '千'
                }
                if(typeData[$(this).attr('data-name')][0].unit_count >= 10000 && (typeData[$(this).attr('data-name')][0].unit_count%10000==0)) {
                    unit = (typeData[$(this).attr('data-name')][0].unit_count/10000) + '万'
                }
                explain = '不满' + unit + typeData[$(this).attr('data-name')][0].unit_type + '按' + unit + typeData[$(this).attr('data-name')][0].unit_type + '计算'
            }
            // $(".unit-price").text(typeData[$(this).attr('data-name')][0].selling_price +'元/'+typeData[$(this).attr('data-name')][0].unit_count+typeData[$(this).attr('data-name')][0].unit_type + '    ' +  explain)
            $(".unit-price").text(explain)
            //限制条件
            $("#title").attr('maxlength', typeData[$(this).attr('data-name')][0].data.title_maxlength)
            $("#title").attr('placeholder','请填写您的论文题目，'+ typeData[$(this).attr('data-name')][0].data.title_maxlength +'字内')
            $("#author").attr('maxlength', typeData[$(this).attr('data-name')][0].data.author_maxlength)
            $("#author").attr('placeholder','请填写您的论文作者'+ typeData[$(this).attr('data-name')][0].data.author_maxlength +'字内')
            $("#content").attr('maxlength', typeData[$(this).attr('data-name')][0].data.max_words)
            $(".tips-block .p2").text('字数范围在 '+ typeData[$(this).attr('data-name')][0].data.min_words +'字~'+ typeData[$(this).attr('data-name')][0].data.max_words +'字内')
            minWords =  typeData[$(this).attr('data-name')][0].data.min_words
            maxWords = typeData[$(this).attr('data-name')][0].data.max_words
            // 提交方式
            if( typeData[$(this).attr('data-name')][0].data.support_submit_types.content && !typeData[$(this).attr('data-name')][0].data.support_submit_types.file) {
                $(".contentBox").addClass('onlyContent')
            }else{
                $(".contentBox").removeClass('onlyContent')
            }
            if( typeData[$(this).attr('data-name')][0].data.support_submit_types.file && !typeData[$(this).attr('data-name')][0].data.support_submit_types.content) {
                $(".contentBox").addClass('onlyFile')
            }else{
                $(".contentBox").removeClass('onlyFile')
            }
            // 切换后也有该方式 不改变提交方式
            if( !typeData[$(this).attr('data-name')][0].data.support_submit_types.content ) {
                $("#content").val('').change()
                $(".tips-block").hide()
                $(".upload-block").css('display', 'block')
            }
            if( !typeData[$(this).attr('data-name')][0].data.support_submit_types.file ) {
                $(".deleteFile").click()
                $(".tips-block").show()
                $("#content").change()
                $(".upload-block").hide()
            }else{
                $(".upload-block").css('display', 'block')
                if(typeData[$(this).attr('data-name')][0].data.support_submit_types.content) {
                    $(".upload-block").css('display', 'flex')
                }
                $("#content").change()
            }
        }
    })

    $("#type_s").on('change', function (){
        if($(this).val() == 'wanfangpu' || $(this).val() == 'cqvipzc') {
            $(".DateBox").fadeIn()
        }else{
            $(".DateBox").fadeOut()
        }
        if($(this).val() == 'cqvipgs') {
            $(".tempSelect").fadeIn()
        }else{
            $(".tempSelect").fadeOut()
        }
        for(var i=0; i<typeData[$(".system-item.active").attr('data-name')].length; i++){
            if(typeData[$(".system-item.active").attr('data-name')][i].short_name == $(this).val()){
                var explain = ''
                var unit = ''
                if(typeData[$(".system-item.active").attr('data-name')][i].unit_type == '篇'){
                    explain = typeData[$(".system-item.active").attr('data-name')][i].selling_price +'元/篇'
                }else{
                    if(typeData[$(".system-item.active").attr('data-name')][i].unit_count < 10000 && (typeData[$(".system-item.active").attr('data-name')][i].unit_count%1000==0)) {
                        unit = (typeData[$(".system-item.active").attr('data-name')][i].unit_count/1000) + '千'
                    }
                    if(typeData[$(".system-item.active").attr('data-name')][i].unit_count >= 10000 && (typeData[$(".system-item.active").attr('data-name')][i].unit_count%10000==0)) {
                        unit = (typeData[$(".system-item.active").attr('data-name')][i].unit_count/10000) + '万'
                    }
                    explain = '不满' + unit + typeData[$(".system-item.active").attr('data-name')][i].unit_type + '按' + unit + typeData[$(".system-item.active").attr('data-name')][i].unit_type + '计算'
                }
                // $(".unit-price").text(typeData[$(".system-item.active").attr('data-name')][i].selling_price +'元/'+typeData[$(".system-item.active").attr('data-name')][i].unit_count+typeData[$(".system-item.active").attr('data-name')][i].unit_type + '    ' +  explain)
                $(".unit-price").text(explain)
                $(".system-item.active").find('.system-price').text( typeData[$(".system-item.active").attr('data-name')][i].selling_price +'元/'+typeData[$(".system-item.active").attr('data-name')][i].unit_count+typeData[$(".system-item.active").attr('data-name')][i].unit_type )
                //限制条件
                $("#title").attr('maxlength', typeData[$(".system-item.active").attr('data-name')][i].data.title_maxlength)
                $("#title").attr('placeholder','请填写您的论文题目，'+ typeData[$(".system-item.active").attr('data-name')][i].data.title_maxlength +'字内')
                $("#author").attr('maxlength', typeData[$(".system-item.active").attr('data-name')][i].data.author_maxlength)
                $("#author").attr('placeholder','请填写您的论文作者'+ typeData[$(".system-item.active").attr('data-name')][i].data.author_maxlength +'字内')
                $("#content").attr('maxlength', typeData[$(".system-item.active").attr('data-name')][i].data.max_words)
                $(".tips-block .p2").text('字数范围在 '+ typeData[$(".system-item.active").attr('data-name')][i].data.min_words +'字~'+ typeData[$(".system-item.active").attr('data-name')][i].data.max_words +'字内')
                minWords =  typeData[$(".system-item.active").attr('data-name')][i].data.min_words
                maxWords = typeData[$(".system-item.active").attr('data-name')][i].data.max_words
                // 提交方式
                if( typeData[$(".system-item.active").attr('data-name')][i].data.support_submit_types.content && !typeData[$(".system-item.active").attr('data-name')][i].data.support_submit_types.file) {
                    $(".contentBox").addClass('onlyContent')
                }else{
                    $(".contentBox").removeClass('onlyContent')
                }
                if( typeData[$(".system-item.active").attr('data-name')][i].data.support_submit_types.file && !typeData[$(".system-item.active").attr('data-name')][i].data.support_submit_types.content) {
                    $(".contentBox").addClass('onlyFile')
                }else{
                    $(".contentBox").removeClass('onlyFile')
                }
                // 切换后也有该方式 不改变提交方式
                if( !typeData[$(".system-item.active").attr('data-name')][i].data.support_submit_types.content ) {
                    $("#content").val('').change()
                    $(".tips-block").hide()
                    $(".upload-block").css('display', 'block')
                }
                if( !typeData[$(".system-item.active").attr('data-name')][i].data.support_submit_types.file ) {
                    $(".deleteFile").click()
                    $(".tips-block").show()
                    $("#content").change()
                    $(".upload-block").hide()
                }else{
                    $(".upload-block").css('display', 'block')
                    if(typeData[$(".system-item.active").attr('data-name')][i].data.support_submit_types.content) {
                        $(".upload-block").css('display', 'flex')
                        $("#content").change()
                    }
                }
            }
        }
    })

    // 输入
    $(".tips-block").on('click', function (){
        $("#content").focus()
    })

    $("#content").on('input', function (){
        $(".word-num").text($(this).val().length)
        if($(this).val().length > 0) {
            $(".tips-block").hide()
            $(".upload-block").hide()
            $("#content_err").hide()
        }else{
            $(".tips-block").show()
            for(let i=0; i<typeData[$(".system-item.active").attr('data-name')].length; i++){
                if(typeData[$(".system-item.active").attr('data-name')].length>1) {
                    if(typeData[$(".system-item.active").attr('data-name')][i].short_name == $("#type_s").val() ){
                        if(typeData[$(".system-item.active").attr('data-name')][i].data.support_submit_types.file) {
                            $(".upload-block").css('display', 'flex')
                        }
                    }
                }else{
                    if(typeData[$(".system-item.active").attr('data-name')][0].data.support_submit_types.file) {
                        $(".upload-block").css('display', 'flex')
                    }
                }
            }
        }
    })

    $("#selectTemp").on('change', function (){
        if($("#selectTemp").val()){
            $("#temp_err").text('')
            $(".select2-selection__rendered").css('color', '#555')
        }
    })

    $("#content").on('change', function (){
        if($(this).val().length > 0) {
            $(".tips-block").hide()
            $(".upload-block").hide()
            $("#content_err").hide()
        }else{
            $(".tips-block").show()
            for(let i=0; i<typeData[$(".system-item.active").attr('data-name')].length; i++){
                if(typeData[$(".system-item.active").attr('data-name')].length>1) {
                    if(typeData[$(".system-item.active").attr('data-name')][i].short_name == $("#type_s").val() ){
                        if(typeData[$(".system-item.active").attr('data-name')][i].data.support_submit_types.file) {
                            $(".upload-block").css('display', 'flex')
                        }
                    }
                }else{
                    if(typeData[$(".system-item.active").attr('data-name')][0].data.support_submit_types.file) {
                        $(".upload-block").css('display', 'flex')
                    }
                }
            }
        }
    })

    $("#file").on('change', function (){
        if($("#file").val()){
            $(".contentBox").hide()
            $(".uploadBox").show()
            $(".uploadBox").css('display', 'flex')
            $(".fileIco.loading").show()
            $(".upload-loading").show()
            $("#content_err").hide()
            $(".wordCount").hide()
            setTimeout(function (){
                fileNameImgType($("#file")[0].files[0].name)
                $(".file-name").text($("#file")[0].files[0].name)
                $(".upload-loading").hide()
                $(".upload-success").show()
                $(".upload-fail").hide()
            },200)
        }else{
            $(".contentBox").show()
            $(".uploadBox").hide()
            $(".fileIco.file-txt").hide()
            $(".fileIco.file-word").hide()
            $(".upload-success").hide()
            $(".upload-fail").hide()
            $(".wordCount").show()
        }
    })

    function fileNameImgType(fileName) {
        if(fileName.slice(fileName.lastIndexOf(".") + 1) == 'txt') {
            $('.fileIco.loading').hide()
            $(".fileIco.file-word").hide()
            $('.fileIco.file-txt').show()
        }else {
            $('.fileIco.loading').hide()
            $(".fileIco.file-word").show()
            $('.fileIco.file-txt').hide()
        }
    }

    $(".deleteFile").on('click', function (){
        $("#file").val('')
        $("#file").trigger('change')
    })

    //验证
    $("#ContainerTo").bootstrapValidator({
        excluded: [':disabled',':hidden'], //[':disabled', ':hidden', ':not(:visible)'] //设置隐藏组件可验证
        feedbackIcons: {
            valid: 'glyphicon',
            invalid: 'glyphicon',
            validating: 'glyphicon'
        },
        fields: {
            title: {
                container: "#title_err",
                validators: {
                    notEmpty: {
                        message: '请填写论文标题'
                    }
                }
            },
            author: {
                container: "#author_err",
                validators: {
                    notEmpty: {
                        message: '请填写论文作者'
                    }
                }
            },
            date: {
                container: "#date_err",
                validators: {
                    notEmpty: {
                        message: '请选择期刊发表日期'
                    }
                }
            },
        }
    });

    // 提交
    var throttling = true
    var check_system = ''
    $("#check").on('click', function (){
        var bootstrapValidator = $("#ContainerTo").data("bootstrapValidator").validate();
        if(bootstrapValidator.isValid()){
            if($(".system-item.active").attr('data-name')=='weipu' && $("#type_s").val() == 'cqvipgs'){
                if(!$("#selectTemp").val()) {
                    toast('请选择模板')
                    $("#temp_err").text('请选择模板')
                    return
                }
            }
            if(!$("#content").val() && !$("#file").val()){
                $("#content_err").text('请填写或上传论文内容')
                $("#content_err").show()
                return
            }else{
                $("#content_err").hide()
            }
            if(!throttling) return;
            toast({
                msg: '正在提交,请稍后...',
                type: 'loading',
                time: 20000
            })
            var data = {
                title: $("#title").val(),
                author: $("#author").val()
            }
            if($("#content").val()){
                data.content = $("#content").val()
            }
            if($("#file").val()){
                data.file = $("#file")[0].files[0]
            }
            if( $(".system-item.active").attr('data-name')=='wanfang'&&$("#type_s").val() == 'wanfangpu' || $(".system-item.active").attr('data-name')=='weipu'&&$("#type_s").val() == 'cqvipzc') {
                data.date =  $("#date").val()
            }
            if( $(".system-item.active").attr('data-name')=='weipu'&&$("#type_s").val() == 'cqvipgs') {
                data.temp_id =  $("#selectTemp").val()
            }
            var goodID = ''
            if($(".check-version").is(':visible')){
                data.check_name = $("#type_s").val()
                for(var i=0; i<typeData[$(".system-item.active").attr('data-name')].length; i++){
                    if( typeData[$(".system-item.active").attr('data-name')][i].short_name == $("#type_s").val() ){
                        goodID = typeData[$(".system-item.active").attr('data-name')][i].goods_id
                    }
                }
                if($("#type_s").val() == "turnitinai"){
                    check_system = "Turnitin国际版+AI"
                }
                if($("#type_s").val() == "turnitin"){
                    check_system = "Turnitin国际版"
                }
                if($("#type_s").val() == "turnitinuk"){
                    check_system = "TurnitinUK版"
                }
                if($("#type_s").val() == "wanfangpu"){
                    check_system = "万方职称版"
                }
                if($("#type_s").val() == "wanfanggl"){
                    check_system = "万方通用版"
                }
                if($("#type_s").val() == "wanfangbd"){
                    check_system = "万方本科版"
                }
                if($("#type_s").val() == "wanfangmd"){
                    check_system = "万方硕博版"
                }
                if($("#type_s").val() == "cqvipzc"){
                    check_system = "维普职称版"
                }
                if($("#type_s").val() == "cqvip"){
                    check_system = "维普本科版"
                }
                if($("#type_s").val() == "cqvipbj"){
                    check_system = "维普编辑部版"
                }
                if($("#type_s").val() == "cqvipmd"){
                    check_system = "维普硕博版"
                }
            }else{
                data.check_name = typeData[$(".system-item.active").attr('data-name')][0].short_name
                goodID = typeData[$(".system-item.active").attr('data-name')][0].goods_id
                check_system = typeData[$(".system-item.active").attr('data-name')][0].name
                if(typeData[$(".system-item.active").attr('data-name')][0].short_name == "ithenticate"){
                    check_system = "Ithenticate"
                }
                if(typeData[$(".system-item.active").attr('data-name')][0].short_name == "paperpass"){
                    check_system = "PaperPass"
                }
            }
            throttling = false
            $.ajax({
                type: 'POST',
                url: urls+ '/api/project/paper_check/order/create',
                processData: false,
                contentType: false,
                xhrFields: {
                    withCredentials: true
                },
                data: getFormData(data),
                success: function (res){
                    if(res.code == 200){
                        unifiedCreate( res.data, data, goodID)
                    }else{
                        throttling = true
                        toastNone()
                        toast(res.codeMsg);
                    }
                },
                error: function (err){
                    throttling = true
                    toastNone()
                    toast("请求失败!请检查网络");
                }
            })
        }
    })

    function unifiedCreate(data, info, goodID) {
        var pathName = ''
        var locationPathname = window.location.pathname
        if(locationPathname.slice(locationPathname.length-1,locationPathname.length) !== '/'){
            locationPathname += '/'
        }
        if(window.location.pathname.indexOf('index.html') != -1){
            pathName = window.location.pathname.replace('index.html','query.html')
        }else{
            pathName =  locationPathname + 'query.html'
        }
        var formData = {
            goods_id: goodID,
            frontNotifyUrl: window.location.origin+ pathName + '?oid=#outTradeNo#',
            domain_record: window.location.origin, // 本地测试需要替换写死, 上线前切记恢复自动获取
            source: /MicroMessenger/.test(window.navigator.userAgent)? 2:7,
            'data[rid][label]': '记录id',
            'data[rid][value]': data.pay_id,
            'data[title][label]':'论文标题',
            'data[title][value]': info.title,
            'data[author][label]':'论文作者',
            'data[author][value]': info.author
        }
        if(order_openid){
            formData['wx_param[appid]'] = threeMsg.wx
            formData['wx_param[openId]'] = order_openid
        }

        $.ajax({
            type: 'post',
            url: urls + '/api/client/order/unified/create?user_token='+USER_TOKEN+'&jane_name='+JANE_NAME+(suffix?'&'+suffix:'') + (suffix2?'&'+suffix2:''),
            data: getFormData(formData),
            processData: false,
            contentType: false,
            xhrFields: {
                withCredentials: true
            },
            success: function(data) {
                toastNone()
                if (data.code == 200) {
                    throttling = true
                    $(".deleteFile").click()
                    if (/MicroMessenger/.test(window.navigator.userAgent) && payWay_Info.wx && payWay_Info.wx_jsapi) {  // 微信浏览器
                        let pathName = window.location.pathname
                        if(window.location.pathname.indexOf('index.html')!==-1){
                            pathName = pathName.replace('index.html','pay.html')
                        }else{
                            pathName = pathName + 'pay.html'
                        }
                        location.href = 'https://api.taoxiangyoushu.com/weixin/getOpenId?appid=' + payWay_Info.wx_jsapi + '&otherUrl=' + encodeURIComponent(window.location.origin + pathName +'?commitId=' + data.data.order_sn + '&goodsid='+ formData.goods_id)
                        return
                    }
                    location.href = './pay.html?commitId=' + data.data.order_sn + '&goodsid='+ formData.goods_id;
                } else {
                    throttling = true
                    toast(data.codeMsg)
                }
            },
            error: function(err) {
                toastNone()
                throttling = true
                // error_dl(err)
            }
        });
    }

    $(window).scroll(function (){
        if($(window).scrollTop() >= 22){
            $(".home>.head").addClass('bgA')
        }else{
            $(".home>.head").removeClass('bgA')
        }
    })

    $(function (){
        if($(window).scrollTop() >= 22){
            $(".home>.head").addClass('bgA')
        }else{
            $(".home>.head").removeClass('bgA')
        }
    })
</script>
</body>
</html>
